<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get available and latest data requirements files — requirements • dmcognigen</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get available and latest data requirements files — requirements"><meta name="description" content="This family of functions allows the user to explore, import, and
  leverage the contents of data requirements files. Supported files types are
  Excel files (xlsx, xls, xlsm) and Word files (docx only). Note that sheets
  = NULL must be used to include docx files in searches.

  read_requirements
Read the latest data requirements file.

  as_requirements
Apply requirements attributes to a data frame.

  available_requirements_table
Get available data requirements
  files. Returns a tibble including available data requirements paths
  and other information.



"><meta property="og:description" content="This family of functions allows the user to explore, import, and
  leverage the contents of data requirements files. Supported files types are
  Excel files (xlsx, xls, xlsm) and Word files (docx only). Note that sheets
  = NULL must be used to include docx files in searches.

  read_requirements
Read the latest data requirements file.

  as_requirements
Apply requirements attributes to a data frame.

  available_requirements_table
Get available data requirements
  files. Returns a tibble including available data requirements paths
  and other information.



"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dmcognigen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/calculations.html">Calculations</a></li>
    <li><a class="dropdown-item" href="../articles/decodes.html">Decode Tables</a></li>
    <li><a class="dropdown-item" href="../articles/requirements.html">Data Requirements</a></li>
    <li><a class="dropdown-item" href="../articles/search-data.html">Search Environment Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/simulations-plus/dmcognigen/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get available and latest data requirements files</h1>
      <small class="dont-index">Source: <a href="https://github.com/simulations-plus/dmcognigen/blob/main/R/requirements.R" class="external-link"><code>R/requirements.R</code></a></small>
      <div class="d-none name"><code>requirements.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This family of functions allows the user to explore, import, and
  leverage the contents of data requirements files. Supported files types are
  Excel files (xlsx, xls, xlsm) and Word files (docx only). Note that <code>sheets
  = NULL</code> must be used to include docx files in searches.</p>
<dl><dt><code>read_requirements</code></dt>
<dd><p>Read the latest data requirements file.</p></dd>

  <dt><code>as_requirements</code></dt>
<dd><p>Apply requirements attributes to a data frame.</p></dd>

  <dt><code>available_requirements_table</code></dt>
<dd><p>Get available data requirements
  files. Returns a <code>tibble</code> including available data requirements paths
  and other information.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_requirements</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  pattern <span class="op">=</span> <span class="st">"req"</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"specs"</span>,</span>
<span>  docx_header_pattern <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ymd"</span>, <span class="st">"mdy"</span>, <span class="st">"dmy"</span><span class="op">)</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variable_name_col <span class="op">=</span> <span class="st">"variable_name"</span>,</span>
<span>  variable_label_col <span class="op">=</span> <span class="st">"variable_label"</span>,</span>
<span>  decode_col <span class="op">=</span> <span class="st">"format_decode"</span>,</span>
<span>  make_clean_names_fn <span class="op">=</span> <span class="fu">janitor</span><span class="fu">::</span><span class="va"><a href="https://sfirke.github.io/janitor/reference/make_clean_names.html" class="external-link">make_clean_names</a></span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_requirements</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  variable_name_col <span class="op">=</span> <span class="st">"variable_name"</span>,</span>
<span>  variable_label_col <span class="op">=</span> <span class="st">"variable_label"</span>,</span>
<span>  decode_col <span class="op">=</span> <span class="st">"format_decode"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">available_requirements_table</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  pattern <span class="op">=</span> <span class="st">"req"</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"specs"</span>,</span>
<span>  date_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ymd"</span>, <span class="st">"mdy"</span>, <span class="st">"dmy"</span><span class="op">)</span>,</span>
<span>  drop_qc <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>a single directory path or the path to a data requirements file.
For <code>read_requirements</code>, providing a directory path will result in the
latest matching data requirements file being selected, while providing a
file path will result in that file being selected. Defaults to the working
directory.</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p><code>character</code> string containing a regular expression. Only
file names which match the regular expression will be returned. Defaults to
<code>"req"</code>.</p></dd>


<dt id="arg-sheet">sheet<a class="anchor" aria-label="anchor" href="#arg-sheet"></a></dt>
<dd><p>either a <code>character</code> vector of required Excel sheet
name(s), the <code>numeric</code> index of the sheet position, or <code>NULL</code>
(for no required sheet names, and to include docx files). Only one sheet
name or index should be provided to <code>read_requirements</code>. Defaults to
<code>"specs"</code>, so `sheet = NULL` must be used to match the latest docx
file.</p></dd>


<dt id="arg-docx-header-pattern">docx_header_pattern<a class="anchor" aria-label="anchor" href="#arg-docx-header-pattern"></a></dt>
<dd><p>one or more patterns of required table header
names. Can be <code>character</code> or a list containing any combination of
<code>character</code>, <code><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">regex</a></code>, and
<code><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">fixed</a></code> patterns. For case-insensitive, use regex.</p></dd>


<dt id="arg-date-format">date_format<a class="anchor" aria-label="anchor" href="#arg-date-format"></a></dt>
<dd><p><code>character</code> indicating the format of the date.
Defaults to the year-month-day format <code>"ymd"</code>.</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>an expression that returns a logical value and is defined in
the terms of the imported requirements table (like
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></code>). If the expression results in an error, that
error is reported as a warning and the subset is not applied. An example is
<code>subset = pk_ard == "x"</code>, which indicates to subset to variables
marked for inclusion in the PK Analysis Ready Dataset.</p></dd>


<dt id="arg-variable-name-col-variable-label-col-decode-col">variable_name_col, variable_label_col, decode_col<a class="anchor" aria-label="anchor" href="#arg-variable-name-col-variable-label-col-decode-col"></a></dt>
<dd><p><code>character</code>
column names in the data requirements that describe the variable names,
their labels, and their decodes. These should match results after
transformations performed by <code>make_clean_names_fn</code>.</p></dd>


<dt id="arg-make-clean-names-fn">make_clean_names_fn<a class="anchor" aria-label="anchor" href="#arg-make-clean-names-fn"></a></dt>
<dd><p>a function/formula that cleans/transforms the
original variable names. Defaults to
<code><a href="https://sfirke.github.io/janitor/reference/make_clean_names.html" class="external-link">make_clean_names</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>optional arguments passed to either
<code><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html" class="external-link">read.xlsx</a></code> or <code><a href="https://rdrr.io/pkg/docxtractr/man/read_docx.html" class="external-link">read_docx</a></code>.</p></dd>


<dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>data frame to apply requirements attributes to.</p></dd>


<dt id="arg-drop-qc">drop_qc<a class="anchor" aria-label="anchor" href="#arg-drop-qc"></a></dt>
<dd><p><code>logical</code> indicating whether to remove versions of the
data requirements that are used for QC. These are identified by patterns of
"qc" or "marked" in the filename.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># read the latest requirements file in the working directory, based on CPP defaults</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">read_requirements</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># specify a particular file and sheet</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">read_requirements</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"requirements.xlsx"</span>, sheet <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># read the latest docx requirements file</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">read_requirements</span><span class="op">(</span></span></span>
<span class="r-in"><span>  pattern <span class="op">=</span> <span class="st">"req.*docx"</span>,</span></span>
<span class="r-in"><span>  sheet <span class="op">=</span> <span class="cn">NULL</span>, </span></span>
<span class="r-in"><span>  docx_header_pattern <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">regex</a></span><span class="op">(</span><span class="st">"variable"</span>, ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply attributes to an existing data frame</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">as_requirements</span><span class="op">(</span><span class="va">reqs_df</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get all available requirements files</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># include docx files in search</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span>sheet <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only include requirements with a specs sheet</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span>sheet <span class="op">=</span> <span class="st">"specs"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># include QC versions</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span>drop_qc <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nash Delcamp, Louis Penrod, Amin Sherzad, Steve Hummel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

