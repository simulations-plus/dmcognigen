<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get available and latest data requirements files — requirements • dmcognigen</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get available and latest data requirements files — requirements"><meta property="og:description" content="This family of functions allows the user to explore, import, and
  leverage the contents of data requirements files. Supported files types are
  Excel files (xlsx, xls, xlsm) and Word files (docx only). Note that sheets
  = NULL must be used to include docx files in searches.

  read_requirements
Read the latest data requirements file.

  as_requirements
Apply requirements attributes to a data frame.

  available_requirements_table
Get available data requirements
  files. Returns a tibble including available data requirements paths
  and other information.



"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dmcognigen</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/calculations.html">Create standard variables with dmcognigen</a>
    </li>
    <li>
      <a href="../articles/decodes.html">Decodes</a>
    </li>
    <li>
      <a href="../articles/requirements.html">Data requirements</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/simulations-plus/dmcognigen/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get available and latest data requirements files</h1>
    <small class="dont-index">Source: <a href="https://github.com/simulations-plus/dmcognigen/blob/main/R/requirements.R" class="external-link"><code>R/requirements.R</code></a></small>
    <div class="hidden name"><code>requirements.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This family of functions allows the user to explore, import, and
  leverage the contents of data requirements files. Supported files types are
  Excel files (xlsx, xls, xlsm) and Word files (docx only). Note that <code>sheets
  = NULL</code> must be used to include docx files in searches.</p>
<dl><dt><code>read_requirements</code></dt>
<dd><p>Read the latest data requirements file.</p></dd>

  <dt><code>as_requirements</code></dt>
<dd><p>Apply requirements attributes to a data frame.</p></dd>

  <dt><code>available_requirements_table</code></dt>
<dd><p>Get available data requirements
  files. Returns a <code>tibble</code> including available data requirements paths
  and other information.</p></dd>


</dl></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_requirements</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  pattern <span class="op">=</span> <span class="st">"req"</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"specs"</span>,</span>
<span>  docx_header_pattern <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ymd"</span>, <span class="st">"mdy"</span>, <span class="st">"dmy"</span><span class="op">)</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variable_name_col <span class="op">=</span> <span class="st">"variable_name"</span>,</span>
<span>  variable_label_col <span class="op">=</span> <span class="st">"variable_label"</span>,</span>
<span>  decode_col <span class="op">=</span> <span class="st">"format_decode"</span>,</span>
<span>  make_clean_names_fn <span class="op">=</span> <span class="fu">janitor</span><span class="fu">::</span><span class="va"><a href="https://sfirke.github.io/janitor/reference/make_clean_names.html" class="external-link">make_clean_names</a></span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_requirements</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  variable_name_col <span class="op">=</span> <span class="st">"variable_name"</span>,</span>
<span>  variable_label_col <span class="op">=</span> <span class="st">"variable_label"</span>,</span>
<span>  decode_col <span class="op">=</span> <span class="st">"format_decode"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">available_requirements_table</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  pattern <span class="op">=</span> <span class="st">"req"</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"specs"</span>,</span>
<span>  date_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ymd"</span>, <span class="st">"mdy"</span>, <span class="st">"dmy"</span><span class="op">)</span>,</span>
<span>  drop_qc <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>a single directory path or the path to a data requirements file.
For <code>read_requirements</code>, providing a directory path will result in the
latest matching data requirements file being selected, while providing a
file path will result in that file being selected. Defaults to the working
directory.</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p><code>character</code> string containing a regular expression. Only
file names which match the regular expression will be returned. Defaults to
<code>"req"</code>.</p></dd>


<dt id="arg-sheet">sheet<a class="anchor" aria-label="anchor" href="#arg-sheet"></a></dt>
<dd><p>either a <code>character</code> vector of required Excel sheet
name(s), the <code>numeric</code> index of the sheet position, or <code>NULL</code>
(for no required sheet names, and to include docx files). Only one sheet
name or index should be provided to <code>read_requirements</code>. Defaults to
<code>"specs"</code>, so `sheet = NULL` must be used to match the latest docx
file.</p></dd>


<dt id="arg-docx-header-pattern">docx_header_pattern<a class="anchor" aria-label="anchor" href="#arg-docx-header-pattern"></a></dt>
<dd><p>one or more patterns of required table header
names. Can be <code>character</code> or a list containing any combination of
<code>character</code>, <code><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">regex</a></code>, and
<code><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">fixed</a></code> patterns. For case-insensitive, use regex.</p></dd>


<dt id="arg-date-format">date_format<a class="anchor" aria-label="anchor" href="#arg-date-format"></a></dt>
<dd><p><code>character</code> indicating the format of the date.
Defaults to the year-month-day format <code>"ymd"</code>.</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>an expression that returns a logical value and is defined in
the terms of the imported requirements table (like
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></code>). If the expression results in an error, that
error is reported as a warning and the subset is not applied. An example is
<code>subset = pk_ard == "x"</code>, which indicates to subset to variables
marked for inclusion in the PK Analysis Ready Dataset.</p></dd>


<dt id="arg-variable-name-col-variable-label-col-decode-col">variable_name_col, variable_label_col, decode_col<a class="anchor" aria-label="anchor" href="#arg-variable-name-col-variable-label-col-decode-col"></a></dt>
<dd><p><code>character</code>
column names in the data requirements that describe the variable names,
their labels, and their decodes. These should match results after
transformations performed by <code>make_clean_names_fn</code>.</p></dd>


<dt id="arg-make-clean-names-fn">make_clean_names_fn<a class="anchor" aria-label="anchor" href="#arg-make-clean-names-fn"></a></dt>
<dd><p>a function/formula that cleans/transforms the
original variable names. Defaults to
<code><a href="https://sfirke.github.io/janitor/reference/make_clean_names.html" class="external-link">make_clean_names</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>optional arguments passed to either
<code><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html" class="external-link">read.xlsx</a></code> or <code><a href="https://rdrr.io/pkg/docxtractr/man/read_docx.html" class="external-link">read_docx</a></code>.</p></dd>


<dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>data frame to apply requirements attributes to.</p></dd>


<dt id="arg-drop-qc">drop_qc<a class="anchor" aria-label="anchor" href="#arg-drop-qc"></a></dt>
<dd><p><code>logical</code> indicating whether to remove versions of the
data requirements that are used for QC. These are identified by patterns of
"qc" or "marked" in the filename.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># read the latest requirements file in the working directory, based on CPP defaults</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">read_requirements</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># specify a particular file and sheet</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">read_requirements</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"requirements.xlsx"</span>, sheet <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># read the latest docx requirements file</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">read_requirements</span><span class="op">(</span></span></span>
<span class="r-in"><span>  pattern <span class="op">=</span> <span class="st">"req.*docx"</span>,</span></span>
<span class="r-in"><span>  sheet <span class="op">=</span> <span class="cn">NULL</span>, </span></span>
<span class="r-in"><span>  docx_header_pattern <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">regex</a></span><span class="op">(</span><span class="st">"variable"</span>, ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply attributes to an existing data frame</span></span></span>
<span class="r-in"><span><span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu">as_requirements</span><span class="op">(</span><span class="va">reqs_df</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get all available requirements files</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># include docx files in search</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span>sheet <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only include requirements with a specs sheet</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span>sheet <span class="op">=</span> <span class="st">"specs"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># include QC versions</span></span></span>
<span class="r-in"><span><span class="fu">available_requirements_table</span><span class="op">(</span>drop_qc <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nash Delcamp, Louis Penrod, Amin Sherzad, Steve Hummel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

